# TextNow 广告屏蔽增强版 (Surge 模块)

这个项目提供了一个 Surge 模块，用于屏蔽 TextNow 应用中的广告并尝试移除广告占位区域，提升使用体验。本模块经过优化，确保只影响TextNow应用，不会干扰其他网站和应用的正常使用。

## 功能特点

- 屏蔽 TextNow 应用中的各类广告
- 移除广告占位区域，优化界面布局
- 拦截广告网络请求
- 修改 API 响应，模拟高级用户状态
- 精确的广告域名规则和 URL 重写规则，避免影响其他应用

## 文件说明

- **textnow-module.sgmodule**: Surge 模块配置文件，包含规则、重写和脚本配置
- **textnow_config_script.js**: 请求阶段脚本，修改请求参数模拟高级用户
- **textnow_adblock.js**: 响应处理脚本，移除广告内容和广告占位区域

## 安装方法

1. 在 Surge 中点击模块 > 安装新模块
2. 输入以下链接：
   ```
   https://raw.githubusercontent.com/mouguu/textnow-adblock--based_on_surge/main/textnow-module.sgmodule
   ```
3. 点击安装

或者手动下载 `textnow-module.sgmodule` 文件，然后在 Surge 中导入。

## 工作原理

该模块通过以下方式屏蔽广告：

1. **域名规则**: 使用REJECT-TINYGIF拦截已知的广告服务器域名
2. **URL 重写**: 精确拦截TextNow相关的广告URL请求
3. **请求修改**: 修改请求参数，使服务器认为用户有权限移除广告
4. **响应处理**: 处理 API 响应，移除广告内容和广告占位区域

## 最新优化

本模块经过以下优化，确保只影响TextNow应用，不会干扰其他网站和应用：

1. **精确的URL匹配**: 所有URL重写规则都添加了"textnow"关键词限制
2. **智能请求识别**: 脚本会检查请求是否与TextNow相关，只处理相关请求
3. **MITM配置优化**: 只拦截TextNow必需的域名
4. **移除通用规则**: 删除了可能影响其他网站的通用广告关键词规则

## 注意事项

- 此模块仅适用于 Surge iOS/macOS 版本
- 需要启用 MITM 功能并信任相关证书
- 可能随 TextNow 应用更新而需要调整
- 如果发现其他网站或应用仍受到影响，请检查您的其他Surge配置

## 故障排除

如果您遇到以下问题，可以尝试：

1. **TextNow广告仍然显示**: 确保模块已正确安装并启用
2. **其他网站或应用无法使用**: 尝试暂时禁用此模块，如果问题解决，请联系作者获取更新版本
3. **TextNow功能异常**: 可能是由于应用更新导致脚本不兼容，请等待更新

## 隐私说明

本模块不会收集或上传任何用户数据，所有处理均在本地完成。

## 许可协议

本项目基于 MIT 许可协议开源。

## 免责声明

本项目仅供学习和研究使用，请遵守相关法律法规和服务条款。作者不对使用本项目产生的任何后果负责。 